import { ref } from 'vue';

// Available languages
export const languages = {
  en: 'English',
  fr: 'Français',
  es: 'Español',
};

// Global current language (shared across the whole app)
const currentLang = ref(localStorage.getItem('mtg-valuation-lang') || 'en');

// Translations
const translations = {
  en: {
    // Navigation
    'nav.booster-valuation': 'Booster Valuation',
    'nav.card-prices': 'Card Prices',
    'nav.booster-details': 'Booster Details',
    'nav.trend-prices': 'Trend Prices',
    'nav.explanations': 'Explanations',
    'nav.data-files': 'Data Files',
    
    // Booster Explanations Page
    'explanations.title': 'Detailed Explanation: MTGJSON Booster Calculations',
    'explanations.subtitle': 'Step-by-step understanding of how Expected Value (EV) of a booster is calculated',
    'explanations.reference': 'Reference',
    'explanations.section1.title': '1. Global Structure of a Booster MTGJSON',
    'explanations.section1.desc': 'According to the MTGJSON documentation, a booster is a data structure containing booster configurations. Each set can have multiple booster types (draft, set, collector, etc.).',
    'explanations.section1.example': 'Real example (Modern Horizons 3)',
    'explanations.section1.types': 'Available types',
    'explanations.section2.title': '2. Sheets (Card Sheets)',
    'explanations.section2.def': 'A sheet is a collection of cards with their relative weights. Each card has a weight that determines its probability of appearing in that sheet.',
    'explanations.section2.example': 'Real example (MH3 - common)',
    'explanations.section2.cards': 'Number of cards',
    'explanations.section2.weight': 'Total weight',
    'explanations.section2.foil': 'Foil',
    'explanations.section2.meaning': 'Meaning',
    'explanations.section3.title': '3. Boosters (Layouts)',
    'explanations.section3.def': 'A layout (or booster) defines a specific combination of sheets. A booster type can have multiple possible layouts, each with a weight that determines its probability.',
    'explanations.section3.example': 'Real example (MH3 - Play Booster)',
    'explanations.section3.weight': 'Weight',
    'explanations.section3.probability': 'Probability',
    'explanations.section4.title': '4. Step-by-Step EV Calculation',
    'explanations.section4.step1.title': 'Step 1: Calculate Sheet EV',
    'explanations.section4.step1.desc': 'For each sheet, calculate the expected value of a card drawn from that sheet.',
    'explanations.section4.step1.formula': 'EV_sheet = Σ (card_price × card_weight / totalWeight_sheet)',
    'explanations.section4.step1.example': 'Example with the "common" sheet',
    'explanations.section4.step1.important': 'Important points',
    'explanations.section4.step2.title': 'Step 2: Calculate Layout EV',
    'explanations.section4.step2.desc': 'For each layout, multiply the quantity of each sheet by its EV.',
    'explanations.section4.step2.formula': 'EV_layout = Σ (sheet_quantity × EV_sheet)',
    'explanations.section4.step3.title': 'Step 3: Calculate Final Booster EV',
    'explanations.section4.step3.desc': 'Take a weighted average of all layouts.',
    'explanations.section4.step3.formula': 'EV_booster = Σ (EV_layout × layout_weight) / total_weight',
    'explanations.section5.title': '5. Minimum Price Management',
    'explanations.section5.desc': 'If a minimum price is configured (e.g., 1€), all cards with a price < minPrice count as 0€ in the calculation.',
    'explanations.section6.title': '6. Complete Example with Real Data',
    'explanations.section6.input': 'Input data',
    'explanations.section6.calculations': 'Calculations',
    'explanations.section7.title': '7. Visualization in the Interface',
    'explanations.section8.title': '8. Key Points to Remember',
    'explanations.section9.title': '9. Code References',
    'explanations.set': 'Set',
    'explanations.booster-type': 'Booster type',
    'explanations.min-price': 'Minimum price',
    'explanations.release-date': 'Release Date',
    'explanations.total-cards': 'Total Cards',
    'explanations.sheet': 'Sheet',
    'explanations.layout': 'Layout',
    'explanations.card': 'Card',
    'explanations.price': 'Price',
    'explanations.probability': 'Probability',
    'explanations.contribution': 'Contribution',
    'explanations.ev': 'EV',
    'explanations.total': 'Total',
    'explanations.example': 'Example',
    'explanations.if-card': 'If a card has',
    'explanations.then-prob': 'then its probability',
    'explanations.suppose': 'Suppose we have',
    'explanations.for-layout': 'For Layout',
    'explanations.final-ev': 'Final EV',
    'explanations.impact': 'Impact',
  },
  fr: {
    'nav.booster-valuation': 'Évaluation Booster',
    'nav.card-prices': 'Prix des Cartes',
    'nav.booster-details': 'Détails Booster',
    'nav.trend-prices': 'Prix de Tendance',
    'nav.explanations': 'Explications',
    'nav.data-files': 'Fichiers JSON',
    'explanations.title': 'Explication Détaillée : Calculs de Boosters MTGJSON',
    'explanations.subtitle': 'Comprendre pas à pas comment l\'Expected Value (EV) d\'un booster est calculé',
    'explanations.reference': 'Référence',
    'explanations.section1.title': '1. Structure Globale d\'un Booster MTGJSON',
    'explanations.section1.desc': 'Selon la documentation MTGJSON, un booster est une structure de données contenant des configurations de booster. Chaque set peut avoir plusieurs types de boosters (draft, set, collector, etc.).',
    'explanations.section1.example': 'Exemple réel (Modern Horizons 3)',
    'explanations.section1.types': 'Types disponibles',
    'explanations.section2.title': '2. Les Sheets (Feuilles de Cartes)',
    'explanations.section2.def': 'Une sheet est une collection de cartes avec leurs poids relatifs. Chaque carte a un poids qui détermine sa probabilité d\'apparaître dans cette sheet.',
    'explanations.section2.example': 'Exemple concret (MH3 - common)',
    'explanations.section2.cards': 'Nombre de cartes',
    'explanations.section2.weight': 'Poids total',
    'explanations.section2.foil': 'Foil',
    'explanations.section2.meaning': 'Signification',
    'explanations.section3.title': '3. Les Boosters (Layouts)',
    'explanations.section3.def': 'Un layout (ou booster) définit une combinaison spécifique de sheets. Un type de booster peut avoir plusieurs layouts possibles, chacun avec un poids qui détermine sa probabilité.',
    'explanations.section3.example': 'Exemple concret (MH3 - Play Booster)',
    'explanations.section3.weight': 'Poids',
    'explanations.section3.probability': 'Probabilité',
    'explanations.section4.title': '4. Calcul Pas à Pas de l\'EV',
    'explanations.section4.step1.title': 'Étape 1 : Calcul de l\'EV d\'une Sheet',
    'explanations.section4.step1.desc': 'Pour chaque sheet, on calcule la valeur attendue d\'une carte tirée de cette sheet.',
    'explanations.section4.step1.formula': 'EV_sheet = Σ (prix_carte × poids_carte / totalWeight_sheet)',
    'explanations.section4.step1.example': 'Exemple avec la sheet "common"',
    'explanations.section4.step1.important': 'Points importants',
    'explanations.section4.step2.title': 'Étape 2 : Calcul de l\'EV d\'un Layout',
    'explanations.section4.step2.desc': 'Pour chaque layout, on multiplie la quantité de chaque sheet par son EV.',
    'explanations.section4.step2.formula': 'EV_layout = Σ (quantité_sheet × EV_sheet)',
    'explanations.section4.step3.title': 'Étape 3 : Calcul de l\'EV Final du Booster',
    'explanations.section4.step3.desc': 'On fait une moyenne pondérée de tous les layouts.',
    'explanations.section4.step3.formula': 'EV_booster = Σ (EV_layout × poids_layout) / poids_total',
    'explanations.section5.title': '5. Gestion des Prix Minimum',
    'explanations.section5.desc': 'Si un prix minimum est configuré (ex: 1€), toutes les cartes avec un prix < minPrice comptent comme 0€ dans le calcul.',
    'explanations.section6.title': '6. Exemple Complet avec Données Réelles',
    'explanations.section6.input': 'Données d\'entrée',
    'explanations.section6.calculations': 'Calculs',
    'explanations.section7.title': '7. Visualisation dans l\'Interface',
    'explanations.section8.title': '8. Points Clés à Retenir',
    'explanations.section9.title': '9. Références du Code',
    'explanations.set': 'Set',
    'explanations.booster-type': 'Type de booster',
    'explanations.min-price': 'Prix minimum',
    'explanations.release-date': 'Date de sortie',
    'explanations.total-cards': 'Cartes totales',
    'explanations.sheet': 'Sheet',
    'explanations.layout': 'Layout',
    'explanations.card': 'Carte',
    'explanations.price': 'Prix',
    'explanations.probability': 'Probabilité',
    'explanations.contribution': 'Contribution',
    'explanations.ev': 'EV',
    'explanations.total': 'Total',
    'explanations.example': 'Exemple',
    'explanations.if-card': 'Si une carte a',
    'explanations.then-prob': 'alors sa probabilité',
    'explanations.suppose': 'Supposons qu\'on ait',
    'explanations.for-layout': 'Pour le Layout',
    'explanations.final-ev': 'EV Final',
    'explanations.impact': 'Impact',
  },
  es: {
    'nav.booster-valuation': 'Valoración Booster',
    'nav.card-prices': 'Precios de Cartas',
    'nav.booster-details': 'Detalles Booster',
    'nav.trend-prices': 'Precios de Tendencia',
    'nav.explanations': 'Explicaciones',
    'nav.data-files': 'Ficheros JSON',
    'explanations.title': 'Explicación Detallada: Cálculos de Boosters MTGJSON',
    'explanations.subtitle': 'Entender paso a paso cómo se calcula el Expected Value (EV) de un booster',
    'explanations.reference': 'Referencia',
    'explanations.section1.title': '1. Estructura Global de un Booster MTGJSON',
    'explanations.section1.desc': 'Según la documentación MTGJSON, un booster es una estructura de datos que contiene configuraciones de booster. Cada set puede tener múltiples tipos de boosters (draft, set, collector, etc.).',
    'explanations.section1.example': 'Ejemplo real (Modern Horizons 3)',
    'explanations.section1.types': 'Tipos disponibles',
    'explanations.section2.title': '2. Las Sheets (Hojas de Cartas)',
    'explanations.section2.def': 'Una sheet es una colección de cartas con sus pesos relativos. Cada carta tiene un peso que determina su probabilidad de aparecer en esa sheet.',
    'explanations.section2.example': 'Ejemplo concreto (MH3 - common)',
    'explanations.section2.cards': 'Número de cartas',
    'explanations.section2.weight': 'Peso total',
    'explanations.section2.foil': 'Foil',
    'explanations.section2.meaning': 'Significado',
    'explanations.section3.title': '3. Los Boosters (Layouts)',
    'explanations.section3.def': 'Un layout (o booster) define una combinación específica de sheets. Un tipo de booster puede tener múltiples layouts posibles, cada uno con un peso que determina su probabilidad.',
    'explanations.section3.example': 'Ejemplo concreto (MH3 - Play Booster)',
    'explanations.section3.weight': 'Peso',
    'explanations.section3.probability': 'Probabilidad',
    'explanations.section4.title': '4. Cálculo Paso a Paso del EV',
    'explanations.section4.step1.title': 'Paso 1: Calcular el EV de una Sheet',
    'explanations.section4.step1.desc': 'Para cada sheet, se calcula el valor esperado de una carta extraída de esa sheet.',
    'explanations.section4.step1.formula': 'EV_sheet = Σ (precio_carta × peso_carta / totalWeight_sheet)',
    'explanations.section4.step1.example': 'Ejemplo con la sheet "common"',
    'explanations.section4.step1.important': 'Puntos importantes',
    'explanations.section4.step2.title': 'Paso 2: Calcular el EV de un Layout',
    'explanations.section4.step2.desc': 'Para cada layout, se multiplica la cantidad de cada sheet por su EV.',
    'explanations.section4.step2.formula': 'EV_layout = Σ (cantidad_sheet × EV_sheet)',
    'explanations.section4.step3.title': 'Paso 3: Calcular el EV Final del Booster',
    'explanations.section4.step3.desc': 'Se hace un promedio ponderado de todos los layouts.',
    'explanations.section4.step3.formula': 'EV_booster = Σ (EV_layout × peso_layout) / peso_total',
    'explanations.section5.title': '5. Gestión de Precios Mínimos',
    'explanations.section5.desc': 'Si se configura un precio mínimo (ej: 1€), todas las cartas con precio < minPrice cuentan como 0€ en el cálculo.',
    'explanations.section6.title': '6. Ejemplo Completo con Datos Reales',
    'explanations.section6.input': 'Datos de entrada',
    'explanations.section6.calculations': 'Cálculos',
    'explanations.section7.title': '7. Visualización en la Interfaz',
    'explanations.section8.title': '8. Puntos Clave a Recordar',
    'explanations.section9.title': '9. Referencias del Código',
    'explanations.set': 'Set',
    'explanations.booster-type': 'Tipo de booster',
    'explanations.min-price': 'Precio mínimo',
    'explanations.release-date': 'Fecha de lanzamiento',
    'explanations.total-cards': 'Cartas totales',
    'explanations.sheet': 'Sheet',
    'explanations.layout': 'Layout',
    'explanations.card': 'Carta',
    'explanations.price': 'Precio',
    'explanations.probability': 'Probabilidad',
    'explanations.contribution': 'Contribución',
    'explanations.ev': 'EV',
    'explanations.total': 'Total',
    'explanations.example': 'Ejemplo',
    'explanations.if-card': 'Si una carta tiene',
    'explanations.then-prob': 'entonces su probabilidad',
    'explanations.suppose': 'Supongamos que tenemos',
    'explanations.for-layout': 'Para el Layout',
    'explanations.final-ev': 'EV Final',
    'explanations.impact': 'Impacto',
  },
};

export function useI18n() {
  function t(key) {
    return translations[currentLang.value]?.[key] || translations.en[key] || key;
  }

  function setLanguage(lang) {
    if (languages[lang]) {
      currentLang.value = lang;
      localStorage.setItem('mtg-valuation-lang', lang);
    }
  }

  return {
    currentLang,
    t,
    setLanguage,
    languages,
  };
}


